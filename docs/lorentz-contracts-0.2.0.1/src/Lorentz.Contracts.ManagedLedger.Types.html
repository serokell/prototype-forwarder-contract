<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-- | Types shared between contracts participating in ManagedLedger.</span><span>
</span><a name="line-2"></a><span>
</span><a name="line-3"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Lorentz.Contracts.ManagedLedger.Types</span><span>
</span><a name="line-4"></a><span>  </span><span class="hs-special">(</span><span> </span><a href="Lorentz.Contracts.ManagedLedger.Types.html#TransferParams"><span class="hs-identifier hs-type">TransferParams</span></a><span>
</span><a name="line-5"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Lorentz.Contracts.ManagedLedger.Types.html#ApproveParams"><span class="hs-identifier hs-type">ApproveParams</span></a><span>
</span><a name="line-6"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Lorentz.Contracts.ManagedLedger.Types.html#AllowanceParams"><span class="hs-identifier hs-type">AllowanceParams</span></a><span>
</span><a name="line-7"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Lorentz.Contracts.ManagedLedger.Types.html#GetAllowanceParams"><span class="hs-identifier hs-type">GetAllowanceParams</span></a><span>
</span><a name="line-8"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Lorentz.Contracts.ManagedLedger.Types.html#MintParams"><span class="hs-identifier hs-type">MintParams</span></a><span>
</span><a name="line-9"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Lorentz.Contracts.ManagedLedger.Types.html#BurnParams"><span class="hs-identifier hs-type">BurnParams</span></a><span>
</span><a name="line-10"></a><span>
</span><a name="line-11"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Lorentz.Contracts.ManagedLedger.Types.html#LedgerValue"><span class="hs-identifier hs-type">LedgerValue</span></a><span>
</span><a name="line-12"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Lorentz.Contracts.ManagedLedger.Types.html#Error"><span class="hs-identifier hs-type">Error</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><a name="line-13"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Lorentz.Contracts.ManagedLedger.Types.html#Storage%27"><span class="hs-identifier hs-type">Storage'</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><a name="line-14"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Lorentz.Contracts.ManagedLedger.Types.html#mkStorage%27"><span class="hs-identifier hs-var">mkStorage'</span></a><span>
</span><a name="line-15"></a><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-16"></a><span>
</span><a name="line-17"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Lorentz</span><span>
</span><a name="line-18"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Prelude</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-operator hs-var">&lt;$&gt;</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-19"></a><span>
</span><a name="line-20"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Fmt</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Buildable</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">+|</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">|+</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-21"></a><span>
</span><a name="line-22"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Util.Named</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-operator hs-var">.!</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-23"></a><span>
</span><a name="line-24"></a><span class="hs-keyword">type</span><span> </span><a name="TransferParams"><a href="Lorentz.Contracts.ManagedLedger.Types.html#TransferParams"><span class="hs-identifier">TransferParams</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-string">&quot;from&quot;</span><span> </span><span class="hs-operator hs-type">:!</span><span> </span><span class="hs-identifier hs-type">Address</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;to&quot;</span><span> </span><span class="hs-operator hs-type">:!</span><span> </span><span class="hs-identifier hs-type">Address</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;value&quot;</span><span> </span><span class="hs-operator hs-type">:!</span><span> </span><span class="hs-identifier hs-type">Natural</span><span class="hs-special">)</span><span>
</span><a name="line-25"></a><span class="hs-keyword">type</span><span> </span><a name="ApproveParams"><a href="Lorentz.Contracts.ManagedLedger.Types.html#ApproveParams"><span class="hs-identifier">ApproveParams</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-string">&quot;spender&quot;</span><span> </span><span class="hs-operator hs-type">:!</span><span> </span><span class="hs-identifier hs-type">Address</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;value&quot;</span><span> </span><span class="hs-operator hs-type">:!</span><span> </span><span class="hs-identifier hs-type">Natural</span><span class="hs-special">)</span><span>
</span><a name="line-26"></a><span class="hs-keyword">type</span><span> </span><a name="AllowanceParams"><a href="Lorentz.Contracts.ManagedLedger.Types.html#AllowanceParams"><span class="hs-identifier">AllowanceParams</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-string">&quot;owner&quot;</span><span> </span><span class="hs-operator hs-type">:!</span><span> </span><span class="hs-identifier hs-type">Address</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;spender&quot;</span><span> </span><span class="hs-operator hs-type">:!</span><span> </span><span class="hs-identifier hs-type">Address</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;value&quot;</span><span> </span><span class="hs-operator hs-type">:!</span><span> </span><span class="hs-identifier hs-type">Natural</span><span class="hs-special">)</span><span>
</span><a name="line-27"></a><span class="hs-keyword">type</span><span> </span><a name="GetAllowanceParams"><a href="Lorentz.Contracts.ManagedLedger.Types.html#GetAllowanceParams"><span class="hs-identifier">GetAllowanceParams</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-string">&quot;owner&quot;</span><span> </span><span class="hs-operator hs-type">:!</span><span> </span><span class="hs-identifier hs-type">Address</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;spender&quot;</span><span> </span><span class="hs-operator hs-type">:!</span><span> </span><span class="hs-identifier hs-type">Address</span><span class="hs-special">)</span><span>
</span><a name="line-28"></a><span class="hs-keyword">type</span><span> </span><a name="MintParams"><a href="Lorentz.Contracts.ManagedLedger.Types.html#MintParams"><span class="hs-identifier">MintParams</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-string">&quot;to&quot;</span><span> </span><span class="hs-operator hs-type">:!</span><span> </span><span class="hs-identifier hs-type">Address</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;value&quot;</span><span> </span><span class="hs-operator hs-type">:!</span><span> </span><span class="hs-identifier hs-type">Natural</span><span class="hs-special">)</span><span>
</span><a name="line-29"></a><span class="hs-keyword">type</span><span> </span><a name="BurnParams"><a href="Lorentz.Contracts.ManagedLedger.Types.html#BurnParams"><span class="hs-identifier">BurnParams</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-string">&quot;from&quot;</span><span> </span><span class="hs-operator hs-type">:!</span><span> </span><span class="hs-identifier hs-type">Address</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;value&quot;</span><span> </span><span class="hs-operator hs-type">:!</span><span> </span><span class="hs-identifier hs-type">Natural</span><span class="hs-special">)</span><span>
</span><a name="line-30"></a><span>
</span><a name="line-31"></a><span class="hs-keyword">type</span><span> </span><a name="LedgerValue"><a href="Lorentz.Contracts.ManagedLedger.Types.html#LedgerValue"><span class="hs-identifier">LedgerValue</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-string">&quot;balance&quot;</span><span> </span><span class="hs-operator hs-type">:!</span><span> </span><span class="hs-identifier hs-type">Natural</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;approvals&quot;</span><span> </span><span class="hs-operator hs-type">:!</span><span> </span><span class="hs-identifier hs-type">Map</span><span> </span><span class="hs-identifier hs-type">Address</span><span> </span><span class="hs-identifier hs-type">Natural</span><span class="hs-special">)</span><span>
</span><a name="line-32"></a><span>
</span><a name="line-33"></a><span class="hs-keyword">data</span><span> </span><a name="Error"><a href="Lorentz.Contracts.ManagedLedger.Types.html#Error"><span class="hs-identifier">Error</span></a></a><span>
</span><a name="line-34"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="UnsafeAllowanceChange"><a href="Lorentz.Contracts.ManagedLedger.Types.html#UnsafeAllowanceChange"><span class="hs-identifier">UnsafeAllowanceChange</span></a></a><span> </span><span class="hs-identifier hs-type">Natural</span><span>
</span><a name="line-35"></a><span>    </span><span class="hs-comment">-- ^ Attempt to change allowance from non-zero to a non-zero value.</span><span>
</span><a name="line-36"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="SenderIsNotAdmin"><a href="Lorentz.Contracts.ManagedLedger.Types.html#SenderIsNotAdmin"><span class="hs-identifier">SenderIsNotAdmin</span></a></a><span>
</span><a name="line-37"></a><span>    </span><span class="hs-comment">-- ^ Contract initiator has not enough rights to perform this operation.</span><span>
</span><a name="line-38"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="NotEnoughBalance"><a href="Lorentz.Contracts.ManagedLedger.Types.html#NotEnoughBalance"><span class="hs-identifier">NotEnoughBalance</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-string">&quot;required&quot;</span><span> </span><span class="hs-operator hs-type">:!</span><span> </span><span class="hs-identifier hs-type">Natural</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;present&quot;</span><span> </span><span class="hs-operator hs-type">:!</span><span> </span><span class="hs-identifier hs-type">Natural</span><span class="hs-special">)</span><span>
</span><a name="line-39"></a><span>    </span><span class="hs-comment">-- ^ Insufficient balance.</span><span>
</span><a name="line-40"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="NotEnoughAllowance"><a href="Lorentz.Contracts.ManagedLedger.Types.html#NotEnoughAllowance"><span class="hs-identifier">NotEnoughAllowance</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-string">&quot;required&quot;</span><span> </span><span class="hs-operator hs-type">:!</span><span> </span><span class="hs-identifier hs-type">Natural</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;present&quot;</span><span> </span><span class="hs-operator hs-type">:!</span><span> </span><span class="hs-identifier hs-type">Natural</span><span class="hs-special">)</span><span>
</span><a name="line-41"></a><span>    </span><span class="hs-comment">-- ^ Insufficient allowance to transfer foreign funds.</span><span>
</span><a name="line-42"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="OperationsArePaused"><a href="Lorentz.Contracts.ManagedLedger.Types.html#OperationsArePaused"><span class="hs-identifier">OperationsArePaused</span></a></a><span>
</span><a name="line-43"></a><span>    </span><span class="hs-comment">-- ^ Operation is unavailable until resume by token admin.</span><span>
</span><a name="line-44"></a><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">stock</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Generic</span><span class="hs-special">)</span><span>
</span><a name="line-45"></a><span>
</span><a name="line-46"></a><span class="hs-identifier hs-var">deriveCustomError</span><span> </span><span class="hs-special">''</span><span class="hs-identifier hs-var">Error</span><span>
</span><a name="line-47"></a><span>
</span><a name="line-48"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Buildable</span><span> </span><a href="Lorentz.Contracts.ManagedLedger.Types.html#Error"><span class="hs-identifier hs-type">Error</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-49"></a><span>  </span><a name="local-8214565720323800704"><span class="hs-identifier">build</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><a name="line-50"></a><span>    </span><a href="Lorentz.Contracts.ManagedLedger.Types.html#UnsafeAllowanceChange"><span class="hs-identifier hs-var">UnsafeAllowanceChange</span></a><span> </span><a name="local-6989586621679247045"><a href="#local-6989586621679247045"><span class="hs-identifier">prevVal</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-51"></a><span>      </span><span class="hs-string">&quot;Cannot change allowance from &quot;</span><span> </span><span class="hs-operator hs-var">+|</span><span> </span><a href="#local-6989586621679247045"><span class="hs-identifier hs-var">prevVal</span></a><span> </span><span class="hs-operator hs-var">|+</span><span> </span><span class="hs-string">&quot; to a non-zero value&quot;</span><span>
</span><a name="line-52"></a><span>    </span><a href="Lorentz.Contracts.ManagedLedger.Types.html#SenderIsNotAdmin"><span class="hs-identifier hs-var">SenderIsNotAdmin</span></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-53"></a><span>      </span><span class="hs-string">&quot;This operation can be executed only by admin, but is invoked by \
      \someone else&quot;</span><span>
</span><a name="line-55"></a><span>    </span><a href="Lorentz.Contracts.ManagedLedger.Types.html#NotEnoughBalance"><span class="hs-identifier hs-var">NotEnoughBalance</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">arg</span><span> </span><span class="">#required</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a name="local-6989586621679247146"><a href="#local-6989586621679247146"><span class="hs-identifier">required</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">arg</span><span> </span><span class="">#present</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a name="local-6989586621679247147"><a href="#local-6989586621679247147"><span class="hs-identifier">present</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-56"></a><span>      </span><span class="hs-string">&quot;Insufficient balance, needed &quot;</span><span> </span><span class="hs-operator hs-var">+|</span><span> </span><a href="#local-6989586621679247146"><span class="hs-identifier hs-var">required</span></a><span> </span><span class="hs-operator hs-var">|+</span><span> </span><span class="hs-string">&quot;, but only&quot;</span><span> </span><span class="hs-operator hs-var">+|</span><span>
</span><a name="line-57"></a><span>      </span><a href="#local-6989586621679247147"><span class="hs-identifier hs-var">present</span></a><span> </span><span class="hs-operator hs-var">|+</span><span> </span><span class="hs-string">&quot; is present&quot;</span><span>
</span><a name="line-58"></a><span>    </span><a href="Lorentz.Contracts.ManagedLedger.Types.html#NotEnoughAllowance"><span class="hs-identifier hs-var">NotEnoughAllowance</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">arg</span><span> </span><span class="">#required</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a name="local-6989586621679247148"><a href="#local-6989586621679247148"><span class="hs-identifier">required</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">arg</span><span> </span><span class="">#present</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a name="local-6989586621679247149"><a href="#local-6989586621679247149"><span class="hs-identifier">present</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-59"></a><span>      </span><span class="hs-string">&quot;Insufficient allowance, you can spend only &quot;</span><span> </span><span class="hs-operator hs-var">+|</span><span> </span><a href="#local-6989586621679247149"><span class="hs-identifier hs-var">present</span></a><span> </span><span class="hs-operator hs-var">|+</span><span> </span><span class="hs-string">&quot;, but &quot;</span><span> </span><span class="hs-operator hs-var">+|</span><span>
</span><a name="line-60"></a><span>      </span><a href="#local-6989586621679247148"><span class="hs-identifier hs-var">required</span></a><span> </span><span class="hs-operator hs-var">|+</span><span> </span><span class="hs-string">&quot; was requested&quot;</span><span>
</span><a name="line-61"></a><span>    </span><a href="Lorentz.Contracts.ManagedLedger.Types.html#OperationsArePaused"><span class="hs-identifier hs-var">OperationsArePaused</span></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-62"></a><span>      </span><span class="hs-string">&quot;Operations are paused and cannot be invoked&quot;</span><span>
</span><a name="line-63"></a><span>
</span><a name="line-64"></a><span class="hs-keyword">data</span><span> </span><a name="Storage%27"><a href="Lorentz.Contracts.ManagedLedger.Types.html#Storage%27"><span class="hs-identifier">Storage'</span></a></a><span> </span><a name="local-6989586621679247044"><a href="#local-6989586621679247044"><span class="hs-identifier">fields</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="Storage%27"><a href="Lorentz.Contracts.ManagedLedger.Types.html#Storage%27"><span class="hs-identifier">Storage'</span></a></a><span>
</span><a name="line-65"></a><span>  </span><span class="hs-special">{</span><span> </span><a name="ledger"><a href="Lorentz.Contracts.ManagedLedger.Types.html#ledger"><span class="hs-identifier">ledger</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">BigMap</span><span> </span><span class="hs-identifier hs-type">Address</span><span> </span><a href="Lorentz.Contracts.ManagedLedger.Types.html#LedgerValue"><span class="hs-identifier hs-type">LedgerValue</span></a><span>
</span><a name="line-66"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="fields"><a href="Lorentz.Contracts.ManagedLedger.Types.html#fields"><span class="hs-identifier">fields</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679247044"><span class="hs-identifier hs-type">fields</span></a><span>
</span><a name="line-67"></a><span>  </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">stock</span><span> </span><span class="hs-identifier hs-type">Generic</span><span>
</span><a name="line-68"></a><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">anyclass</span><span> </span><span class="hs-identifier hs-type">IsoValue</span><span>
</span><a name="line-69"></a><span>
</span><a name="line-70"></a><span class="hs-comment">-- | Create a default storage with ability to set some balances to</span><span>
</span><a name="line-71"></a><span class="hs-comment">-- non-zero values.</span><span>
</span><a name="line-72"></a><span class="hs-identifier">mkStorage'</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Map</span><span> </span><span class="hs-identifier hs-type">Address</span><span> </span><span class="hs-identifier hs-type">Natural</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679247150"><span class="hs-identifier hs-type">fields</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Lorentz.Contracts.ManagedLedger.Types.html#Storage%27"><span class="hs-identifier hs-type">Storage'</span></a><span> </span><a href="#local-6989586621679247150"><span class="hs-identifier hs-type">fields</span></a><span>
</span><a name="line-73"></a><a name="mkStorage%27"><a href="Lorentz.Contracts.ManagedLedger.Types.html#mkStorage%27"><span class="hs-identifier">mkStorage'</span></a></a><span> </span><a name="local-6989586621679247151"><a href="#local-6989586621679247151"><span class="hs-identifier">balances</span></a></a><span> </span><a name="local-6989586621679247152"><a href="#local-6989586621679247152"><span class="hs-identifier">flds</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Lorentz.Contracts.ManagedLedger.Types.html#Storage%27"><span class="hs-identifier hs-var">Storage'</span></a><span>
</span><a name="line-74"></a><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">ledger</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">BigMap</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679247153"><span class="hs-identifier hs-var">toLedgerValue</span></a><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="#local-6989586621679247151"><span class="hs-identifier hs-var">balances</span></a><span>
</span><a name="line-75"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">fields</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679247152"><span class="hs-identifier hs-var">flds</span></a><span>
</span><a name="line-76"></a><span>  </span><span class="hs-special">}</span><span>
</span><a name="line-77"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-78"></a><span>    </span><a name="local-6989586621679247153"><a href="#local-6989586621679247153"><span class="hs-identifier">toLedgerValue</span></a></a><span> </span><a name="local-6989586621679247154"><a href="#local-6989586621679247154"><span class="hs-identifier">initBal</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="">#balance</span><span> </span><span class="hs-operator hs-var">.!</span><span> </span><a href="#local-6989586621679247154"><span class="hs-identifier hs-var">initBal</span></a><span class="hs-special">,</span><span> </span><span class="">#approvals</span><span> </span><span class="hs-operator hs-var">.!</span><span> </span><span class="hs-identifier hs-var">mempty</span><span class="hs-special">)</span><span>
</span><a name="line-79"></a></pre></body></html>